<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Result</title>
    <script type="text/javascript" src="/js/jquery-3.6.0.min.js"></script>
    <script th:inline="javascript">
        $(document).ready(function () {
            $("#btnAnalyze").on("click", function () {
                doAnalyze();
            });
        });

        function doAnalyze() {
            var inputContents = document.getElementById('inputContents').value;
            if (inputContents.trim() === '') {
                alert("내용을 입력해주세요.");
                return;
            }

            $.ajax({
                type: "POST",
                url: "/notice/analyze",
                data: "inputContents=" + encodeURIComponent(inputContents),
                contentType: "application/x-www-form-urlencoded",
                success: function (response) {
                    // 분석 성공 시 동작
                    console.log(response);
                    alert("분석을 완료했습니다.");
                },
                error: function (xhr, status, error) {
                    // 분석 실패 시 동작
                    console.error(xhr.responseText);
                    alert("분석에 실패했습니다. 다시 시도해주세요.");
                }
            });
        }
    </script>
</head>
<body>
<h2>공지사항 등록하기</h2>
<hr/>
<br/>
<div>
    <form action="analyze.html" method="post">
    <input type="text" id="content" placeholder="내용">
<!--    <button id="btnAnalyze" type="submit">분석</button>-->
    <input type="submit" value="분석">
    </form>
</div>
</body>
</html>
